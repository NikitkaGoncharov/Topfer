# Функциональность отслеживания инвестиций в акции

## Описание

Новая функция позволяет пользователям отслеживать свой портфель акций с автоматическим обновлением текущих цен и расчетом прибыли/убытка в реальном времени.

## Основные возможности

### 1. Добавление акций в портфель
- Указание тикера акции (например: AAPL, MSFT, GOOGL)
- Автоматическое получение названия компании по тикеру
- Указание количества акций
- Указание цены покупки
- Указание даты покупки
- Добавление заметок

### 2. Отслеживание портфеля
- Просмотр всех акций в портфеле
- Текущая цена каждой акции (обновляется каждые 10 минут)
- Расчет прибыли/убытка по каждой позиции
- Расчет процента доходности
- Общая статистика по портфелю

### 3. Управление акциями
- Редактирование информации об акции
- Удаление акции из портфеля

## Технические детали

### Модели
- **Stock** - модель для хранения информации об акциях в портфеле пользователя
  - `ticker` - тикер акции
  - `company_name` - название компании
  - `quantity` - количество акций
  - `purchase_price` - цена покупки
  - `purchase_date` - дата покупки
  - `currency` - валюта
  - `notes` - заметки
  - `user` - владелец акции

### Сервисы
- **StockService** - сервис для работы с внешним API
  - `get_stock_price(ticker)` - получение текущей цены акции
  - `get_stock_info(ticker)` - получение подробной информации об акции
  - `calculate_profit(purchase_price, current_price, quantity)` - расчет прибыли/убытка

### API
Используется бесплатный Yahoo Finance API для получения текущих цен акций:
- URL: `https://query1.finance.yahoo.com/v8/finance/chart/{ticker}`
- Кэширование данных на 10 минут для оптимизации запросов

### Маршруты
- `/investments/` - просмотр портфеля
- `/investments/add/` - добавление акции
- `/investments/<id>/edit/` - редактирование акции
- `/investments/<id>/delete/` - удаление акции
- `/api/stock/` - AJAX endpoint для получения данных об акции

### Шаблоны
- `investments.html` - страница портфеля с таблицей акций
- `stock_form.html` - форма добавления/редактирования акции
- `stock_confirm_delete.html` - подтверждение удаления акции

## Использование

### Добавление акции
1. Перейдите на страницу "Инвестиции"
2. Нажмите кнопку "Добавить акцию"
3. Введите тикер акции (название компании подтянется автоматически)
4. Укажите количество акций, цену покупки и дату
5. При необходимости добавьте заметки
6. Нажмите "Сохранить"

### Просмотр портфеля
На странице "Инвестиции" вы увидите:
- Общую сумму инвестиций
- Текущую стоимость портфеля
- Прибыль/убыток в абсолютном и процентном выражении
- Таблицу со всеми акциями и их текущими показателями

### Обновление данных
Цены акций обновляются автоматически каждые 10 минут благодаря кэшированию.
Для принудительного обновления просто обновите страницу.

## Примеры поддерживаемых акций
- AAPL (Apple Inc.)
- MSFT (Microsoft Corporation)
- GOOGL (Alphabet Inc.)
- TSLA (Tesla, Inc.)
- AMZN (Amazon.com, Inc.)
- META (Meta Platforms, Inc.)
- NVDA (NVIDIA Corporation)
- И многие другие акции, торгующиеся на американских биржах

## Дальнейшие улучшения
Возможные направления для развития:
1. Поддержка дивидендов
2. История изменения цен (графики)
3. Уведомления о значительных изменениях цен
4. Поддержка криптовалют
5. Экспорт данных в CSV/Excel
6. Настройка целевых цен для продажи
7. Калькулятор налогов
